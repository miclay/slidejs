!function(t,i,e){"undefined"!=typeof module&&module.exports?module.exports=e():"function"==typeof define&&define.amd?define(e):i.SlideJS=e()}(0,this,function(){var t=function(t){for(var i in this.opts={parentSelector:".slide-box",itemSelector:".slide-item",width:null,height:null,transitionDuration:500,transitionTimingFunction:"ease",transitionDelay:0,activeIndex:0,loop:!1,beforeSlide:function(){},afterSlide:function(){}},t=t||{})this.opts[i]=t[i];this.activeIndex=this.opts.activeIndex,this.sliding=!1,this.contentScrolling=!1,this._init()};return t.prototype={_init:function(){var t=this.opts,i=document.querySelector(t.parentSelector);if(!i||!i.querySelectorAll)throw Error('请传入正确的parentSelector参数(如:".slid-box")');if(this.domSlidBox=i,this.domSlidItems=i.querySelectorAll(t.itemSelector),!this.domSlidItems||!this.domSlidItems.length)throw Error('请传入正确的itemSelector参数(如:".slid-item")');this.adapt(),this._addEvents()},_addEvents:function(){var t,s=this,l=this.opts,r=this.domSlidItems,n=-1,o=function(t){var i=r[s.activeIndex];if(!i.children||!i.children.length)return!1;var e=l.height||window.innerHeight,n=i.children[0].clientHeight||0;if(n-e<=0)return!1;var o=i.scrollTop||0;if(t<0){if(o<n-e)return!0}else if(0<t&&0<o)return!0;return!1};t=window.onresize,window.onresize=t&&"function"==typeof t?function(t){s.adapt()}:function(t){s.adapt()},function(){var t=function(t){var i=t.wheelDelta||-1*t.detail;o(i)||(n=clearTimeout(n),n=setTimeout(function(){i<0?s.slideNext():0<i&&s.slidePrev()},50))};document.addEventListener&&document.addEventListener("DOMMouseScroll",t,!1),window.onmousewheel=document.onmousewheel=t;for(var e=0;e<r.length;e++)!function(){var t=r[e],i=-1;t.onscroll=function(t){s.contentScrolling=!0,i=clearTimeout(i),i=setTimeout(function(){s.contentScrolling=!1},1e3)}}()}(),function(){if("ontouchstart"in window){var e=-1;document.ontouchstart=function(t){e=t.touches[0].clientY},document.ontouchmove=function(t){var i=t.touches[0].clientY-e;o(i)||(n=clearTimeout(n),n=setTimeout(function(){i<-10?s.slideNext():10<i&&s.slidePrev()},50))},document.ontouchend=function(t){e=-1}}}()},_anim:function(t,i,e){var n=this.opts.height||window.innerHeight;i<e?(t.style.top=-1*n+"px",t.style.opacity=0):e<i?(t.style.top=n+"px",t.style.opacity=0):(t.style.top=0,t.style.opacity=1),t.scrollTop=0},adapt:function(){var t=this.opts,i=this.domSlidBox,e=this.domSlidItems,n=t.width||window.innerWidth,o=t.height||window.innerHeight,s="all "+t.transitionDuration+"ms "+t.transitionTimingFunction+" "+t.transitionDelay+"ms";i.style.position="fixed",i.style.width=n+"px",i.style.height=o+"px",i.style.left=0,i.style.top=0,i.style.overflow="hidden";for(var l=0;l<e.length;l++){var r=e[l];r.style.position="absolute",r.style.width=n+"px",r.style.height=o+"px",r.style.overflow="auto",this._anim(r,l,this.activeIndex),r.style.transition=s,r.style["-ms-transition"]=s,r.style["-webkit-transition"]=s,r.style["-o-transition"]=s,r.style["-moz-transition"]=s}},slideNext:function(){var t=this,i=this.activeIndex,e=this.domSlidItems.length,n=i+1;if(e-1<n){if(!this.loop)return;n=0}setTimeout(function(){t.slideTo(n)},10)},slidePrev:function(){var t=this,i=this.activeIndex,e=this.domSlidItems.length,n=i-1;if(n<0){if(!this.loop)return;n=e-1}setTimeout(function(){t.slideTo(n)},10)},slideTo:function(t){var i=this,e=this.opts,n=this.activeIndex;if(!this.sliding&&!this.contentScrolling&&"stop"!==e.beforeSlide(n,t)){this.sliding=!0,setTimeout(function(){i.sliding=!1,e.afterSlide(n,t)},e.transitionDuration+100);for(var o=this.domSlidItems,s=(e.height||window.innerHeight,0);s<o.length;s++){var l=o[s];this._anim(l,s,t)}this.activeIndex=t}}},t});